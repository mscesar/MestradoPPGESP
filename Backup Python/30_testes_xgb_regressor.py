from sklearn.model_selection import StratifiedKFold

import numpy as np

from xgboost import XGBRegressor

from sklearn.metrics import r2_score

folds_reg = 10

import time
start = time.time()

resultados30 = []
for i in range(21,51):
    print(str(i))
    k_fold_reg  = StratifiedKFold(n_splits = folds_reg, shuffle = True, random_state = i)
    resultados1 = []
    for indice_treinamento, indice_teste in k_fold_reg.split(X_reg, np.zeros(shape=(Y_reg.shape[0], 1))):
        #XGB 06
        #regressor = XGBRegressor( n_estimators = 500, min_child_weight = 70, max_depth = 45, learning_rate = 0.01, n_jobs = 5 )
        #XGB 07
        #regressor = XGBRegressor( n_estimators = 400, min_child_weight = 60, max_depth = 50, learning_rate = 0.01, n_jobs = 5 )
        #XGB 08
        #regressor = XGBRegressor( n_estimators = 4000, min_child_weight = 40, max_depth = 450, learning_rate = 0.001, n_jobs = 4 )        
        #XGB 09
        regressor = XGBRegressor( n_estimators = 500, min_child_weight = 50, max_depth = 60, learning_rate = 0.01, n_jobs = 5 )
        regressor.fit(X_reg[indice_treinamento], Y_reg[indice_treinamento])
        previsoes = regressor.predict(X_reg[indice_teste])
        escore = r2_score(Y_reg[indice_teste], previsoes)
        resultados1.append(escore)
    resultados1 = np.asarray(resultados1)
    media = resultados1.mean()
    resultados30.append(media)
    
end = time.time()
print("Tempo de Execução: {:.2f} min".format((end - start)/60))

#XGB 06
Tempo de Execução: 2814.33 min

Tempo de Execução: 595.33 min

#XGB 07
Tempo de Execução: 2159.32 min

Tempo de Execução: 462.54 min

#XGB 09
Tempo de Execução: 3126.59 min

Tempo de Execução: 678.67 min

#XGB 08
Tempo de Execução: 6574.11 min

resultados30 = np.asarray(resultados30)    
resultados30.mean()

#XGB 06
0.21228288309419033

0.21228288309419033

#XGB 07
0.2102996089141526

0.2102996089141526

#XGB 09
0.21092375676995093

0.21092375676995093

#XGB 08
0.20958200109666686

for i in range(resultados30.size):
    print(str(resultados30[i]).replace('.', ','))
    
#XGB 06
0,2128868847874604
0,20804663768940007
0,20959477934851994
0,21362383787679445
0,21558510601396547
0,2102385923848586
0,2136415642929625
0,21505001747252242
0,21169029833067982
0,21349913546875454
0,21058127057201176
0,20861674152458978
0,21921621626782786
0,2140435624241591
0,20954520849137293
0,21272219141320567
0,21357173020959622
0,21300723860459875
0,21257735902075964
0,20917252145946005
0,21127257247771172
0,21157475440990564
0,21469150647523513
0,21652954101968774
0,21136656227563977
0,2082187970888146
0,21163668540672548
0,20984664021096622
0,21156430010729257
0,21487423970023167

#XGB 07
0,20966440625909186
0,20389107108769772
0,20778850191215742
0,21175616651096424
0,21420174305649367
0,20978189237042066
0,21061392358186995
0,21138023123960464
0,20937842846961705
0,2124330462821613
0,2109077050671754
0,21023755342657005
0,21409083109792615
0,2098897811284967
0,20587317776765984
0,20979184940746426
0,21250810710987017
0,21099575700141085
0,21249903123349725
0,20606287267386433
0,2080164147990698
0,21144978574887455
0,21255971702904847
0,2135003185428951
0,20986688122833153
0,2080491396053583
0,21164524468525917
0,20906735835581217
0,20916072507745348
0,21192660566846194

#XGB 09
0,20987718577926717
0,20518253402688352
0,20806919269830765
0,21656853897733558
0,21325531405615542
0,2112505195098139
0,21154332800288483
0,21223689326542244
0,20916064140362328
0,2110583525189858
0,20995981034550434
0,21199260979495774
0,2144618180436874
0,21321661767752312
0,2079124008395604
0,21276442960086128
0,21132614444027661
0,21171531102323082
0,20984929688675794
0,2057787469097244
0,2089791422854855
0,2099440841093768
0,21314741404268026
0,2133332508447136
0,2106917403751441
0,2088564356566006
0,2104081114013348
0,210271885836422
0,2120330450269628
0,2128679077190448

#XGB 08
0,20966713625444874
0,20360346886405117
0,2079266508315679
0,21212173194740283
0,21159017613354697
0,2114970620896648
0,2105729847028409
0,20903910765436642
0,20868042555016336
0,2122204096809542
0,20882350133943114
0,2100358912944416
0,21475778151997318
0,20930469402376958
0,2070330697443834
0,21029736475513974
0,20872899442216059
0,21247512940400987
0,21145474356203967
0,2062686308301614
0,20802384974190496
0,20930282505838074
0,21124502250545465
0,20893424051077042
0,20978812349981105
0,20842668007349321
0,20649551072116581
0,210385814414219
0,2074017158858254
0,21135729588446361